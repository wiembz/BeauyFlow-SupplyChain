<div class="dashboard-container">
  <iframe
    width="100%"
    height="100%"
    [src]="dashboardUrl"
    frameborder="0"
    allowfullscreen="true">
  </iframe>
</div>

<div class="navbar-container">
  <div class="section">
    <h3>📩 Messages Odoo</h3>
    <div *ngIf="messages.length > 0; else noMessages">
      <div *ngFor="let message of messages" class="message-card">
        <div [innerHTML]="message.body"></div>
        <small>{{ message.date | date:'short' }}</small>
      </div>
    </div>
    <ng-template #noMessages>
      <p>Aucun message reçu.</p>
    </ng-template>
  </div>

  <div class="section">
    <h3>📝 Envoyer un message</h3>
    <input type="text" [(ngModel)]="newMessage" placeholder="Écrire un message..." />
    <button (click)="sendMessage()">Envoyer</button>
  </div>

  <div class="section">
    <h3>📋 Tâches en cours</h3>
    <div *ngIf="tasks.length > 0; else noTasks">
      <ul>
        <li *ngFor="let task of tasks">
          {{ task.name }} (Date limite : {{ task.date_deadline | date:'shortDate' }})
        </li>
      </ul>
    </div>
    <ng-template #noTasks>
      <p>Aucune tâche assignée.</p>
    </ng-template>
  </div>
</div>
